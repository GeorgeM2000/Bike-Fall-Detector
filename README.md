<img src="https://drive.google.com/uc?id=1jrs8-iPYPX0xsiIfCZBo4LFnOjTLmzXp" alt="" width="230" height="230" title="Εφαρμογή ανίχνευσης πτώσης">
<h1>Εφαρμογή ανίχνευσης πτώσης</h1>


Εφαρμογή ανίχνευσης πτώσης/ατυχημάτων για ποδήλατα και μηχανές για τον 4ο Μαθητικό και Φοιτητικό Διαγωνισμό Προγραμματισμού, με θέμα «Κοζάνη 2030: Στον δρόμο για την κλιματική ουδετερότητα». Η εφαρμογή αφορά τον τομέα της ασφάλειας σε μία έξυπνη πόλη εστιάζοντας το ενδιαφέρον της στην ασφάλεια όλων των ηλικιακών ομάδων και ειδικότερα αυτών που βρίσκονται σε υψηλό κίνδυνο.

<h1>Ασφάλεια σε μία Έξυπνη Πόλη</h1>

Οι ασφαλείς πόλεις αποτελούν βασικό πυλώνα που υποστηρίζει την ανάπτυξη έξυπνων πόλεων σε όλο τον κόσμο. Παρέχουν την ασφάλεια που απαιτείται για την προστασία των πολιτών από το έγκλημα, τα ατυχήματα, καθώς και για τον μετριασμό, όσο το δυνατόν περισσότερο, των επιπτώσεων των φυσικών καταστροφών και άλλων απειλών. Μια επιτυχημένη λύση ασφαλούς έξυπνης πόλης θα πρέπει να υποστηρίζει τις υπηρεσίες ασφαλείας μιας πόλης όπως τα τμήματα πυροσβεστικής και διάσωσης, τα τμήματα δημόσιας υγείας και κοινωνικών υπηρεσιών πριν, κατά τη διάρκεια και μετά από μια εκδήλωση ενός συμβάντος, και να ενσωματώνει τις διαφορετικές τεχνολογίες και τα κυβερνητικά τμήματα που είναι υπεύθυνα για την ασφάλεια των πολιτών.<br>
Τέσσερα βασικά προαπαιτούμενα είναι τα εξής:

1. <b>Πρόληψη</b>: Παρέχει αξιόπιστα και ολοκληρωμένα μέτρα ασφαλείας για την πρόβλεψη απειλών και επικίνδυνων καταστάσεων. Οι αρχές της πόλης πρέπει να είναι σε θέση να λάβουν μέτρα για να αποτρέψουν εξαρχής την εμφάνιση απειλών
2. <b>Ανίχνευση</b>: Βοηθά τους οργανισμούς δημόσιας ασφάλειας να συλλέγουν, να μοιράζονται και να αναλύουν δεδομένα πιο αποτελεσματικά για την παροχή έγκαιρων προειδοποιήσεων και την ευαισθητοποίηση της κατάστασης. Τα συστήματα αισθητήρων στην πόλη θα συλλέγουν προληπτικά πληροφορίες. Ο τύπος του αισθητήρα που χρησιμοποιείται καθορίζεται από το εύρος του έργου ασφαλούς πόλης και από το πόση διαλειτουργικότητα απαιτείται. Οι πληροφορίες μπορούν να χρησιμοποιηθούν για την παροχή έγκαιρης ανίχνευσης και ειδοποιήσεων όταν συμβαίνουν γεγονότα.
3. <b>Απάντηση</b>: Δίνει τη δυνατότητα στους βασικούς οργανισμούς της πόλης να αντιδρούν σε απειλές για την ασφάλεια σε πραγματικό χρόνο. Οι αρχές της πόλης πρέπει να είναι σε θέση να αποτρέψουν την κλιμάκωση ενός ανεπιθύμητου συμβάντος.
4. <b>Ανάκτηση</b>: Παρέχει εξέταση και ανάλυση μετά το συμβάν, ταυτοποιεί τα θύματα και παρέχει βοήθεια σε ενέργειες διάσωσης. Μετά από ένα συμβάν, οι αρχές της πόλης πρέπει να είναι σε θέση να εξετάζουν και να αναλύουν γρήγορα όλα τα δεδομένα που λαμβάνονται από τα σχετικά συστήματα αισθητήρων. Οι πληροφορίες μπορούν να χρησιμοποιηθούν για τη διευκόλυνση των ενεργειών διάσωσης και των διαδικασιών αναγνώρισης και βοήθειας των Θυμάτων.


<h1>Σύντομη Περιγραφή</h1>

<h3>Στόχος</h3>
Ο στόχος της εφαρμογής είναι να ανιχνεύει ατυχήματα και πτώσεις μηχανής η ποδηλάτου και να ειδοποιήσει επιλεγμένες από τον χρήστη επαφές μέσω μηνυμάτων SMS στα οποία θα περιλαμβάνονται πληροφορίες τοποθεσίας. Όλα αυτά θα γίνονται σε ζωντανό χρόνο κρατώντας την κατανάλωση ενέργειας σε πολύ χαμηλά επίπεδα.

<h3>Τι εργαλεία χρησιμοποιήθηκαν</h3>
Η εφαρμογή έχει υλοποιηθεί για την πλατφόρμα Android χρησιμοποιώντας τη γλώσσα προγραμματισμού Java και τη γλώσσα σήμανσης XML. H Java χρησιμοποιήθηκε για τη λογική της εφαρμογής ενώ η XML για την σχεδίαση της διεπαφής χρήστη. Επίσης, χρησιμοποιήθηκε σαν βάση δεδομένων η Firebase της Google, η οποία είναι εύχρηστη και συνδέεται πολύ εύκολα με οποιαδήποτε Android εφαρμογή. Στην βάση δεδομένων αποθηκεύονται πληροφορίες χρηστών, όπως οι επαφές στις οποίες θα σταλθούν οι ειδοποιήσεις(SMS) εάν συμβεί ένα ατύχημα και τα στοιχεία λογαριασμού χρήστη.

Ένα ατύχημα ανιχνεύεται χρησιμοποιώντας την πλακέτα Arduino Nano 33 BLE(Bluetooth Low Energy) Sense τοποθετημένη επάνω σε ένα shield συνδεόμενη με μία μπαταρία 9V. 

<img src="https://drive.google.com/uc?id=1Ci5SUzHxW-uHdfvAojjIX6mlpYSU8qWH" alt="" width="543" height="250" title="Arduino Nano 33 ble Sense">                                                                                         
<img src="https://drive.google.com/uc?id=10O5-KpwNs_aifo53T_lEOUztyEHoAKPx" alt="" width="543" height="543" title="Arduino Nano 33 ble Sense Shield">

<h3>Arduino Nano 33 BLE Sense</h3>
Το Arduino Nano 33 BLE είναι μια εξέλιξη του παραδοσιακού Arduino Nano, αλλά διαθέτει πολύ πιο ισχυρό επεξεργαστή. Αυτό μας δίνει την δυνατότητα να δημιουργήσουμε μεγαλύτερα προγράμματα από ό,τι με το Arduino Uno και με πολύ περισσότερες μεταβλητές. Ο κύριος επεξεργαστής περιλαμβάνει άλλες εκπληκτικές δυνατότητες όπως Bluetooth ζευγαρώνοντας μέσω NFC και εξαιρετικά χαμηλής κατανάλωσης. Το Nano 33 BLE διαθέτει μονάδα αδρανειακής (inertial) μέτρησης 9 αξόνων (IMU) που σημαίνει ότι περιλαμβάνει επιταχυνσιόμετρο, γυροσκόπιο και μαγνητόμετρο με ανάλυση 3 αξόνων το καθένα.
Το chipset επικοινωνιών στο Nano 33 BLE μπορεί να είναι ταυτόχρονα BLE και Bluetooth® client και host συσκευή. Κάτι πολύ μοναδικό στον κόσμο των πλατφορμών μικροελεγκτών.

<h3>Λειτουργία εφαρμογής</h3>
Η συσκευή τοποθετείται με κατάλληλο τρόπο στην μηχανή η στο ποδήλατο έτσι ώστε αν γέρνει αρκετά προς τα αριστερά η δεξιά να στέλνει ένα BLE σήμα στην εφαρμογή. Ο χρήστης έχει την δυνατότητα να τοποθέτησει αντί της συσκευής Arduino Nano, την κινητή συσκευή του/της στο ποδήλατο η στην μηχανή ώστε η ανίχνευση να γίνει από την κινητή συσκευή. Υποθέτουμε πως όταν η μηχανή η το ποδήλατο γέρνουν αρκετά στα δεξιά η αριστερά, σημαίνει πως δεν βρίσκονται στην συνηθισμένη θέση λειτουργίας και έτσι χαρακτηρίζουμε την κατάσταση ως πτώση/ατύχημα. Το σήμα θα στέλνεται μετά το πέρας 30 δευτερολέπτων οπότε ξεκινάει μια χρονομέτρηση. Πριν σταλεί το σήμα στην κινητή συσκευή, ανάβει ένα LED στο Arduino για να ειδοποιήσει τον χρήστη ότι έχει ανιχνευθεί μία πτώση/ατύχημα. Ο χρήστης θα έχει την δυνατότητα να ακυρώσει την χρονομέτρηση κουνώντας το χέρι του/της κοντά στον αισθητήρα χειρονομιών που παρέχει η πλακέτα, η τοποθετώντας την μηχανή η το ποδήλατο σε μία κατάσταση ισορροπίας. Με αυτό τον τρόπο εξασφαλίζουμε ότι εάν υπάρχουν λανθασμένες ειδοποιήσεις θα ειδοποιηθεί ο χρήστης και θα μπορεί να τις ακυρώσει.<br> 
Για να είναι η εφαρμογή ανθεκτική σε σφάλματα και για να εξαλείψουμε τα μοναδικά σημεία αστοχίας, η εφαρμογή χρησιμοποιεί το επιταχυνσιόμετρο της κινητής συσκευής για να υπολογίζει την θέση του χρήστη και να ανιχνεύει ξαφνικές, έντονες και γρήγορες κινήσεις. Με αυτό τον τρόπο, αν το επιταχυνσιόμετρο της πλακέτας αποτύχει να ανιχνεύσει μια πτώση/ατύχημα, η ο χρήστης βρίσκεται σε μακρινή απόσταση έτσι ώστε να είναι εκτός της εμβέλειας σήματος BLE, να καταφέρει παρ' όλα αυτά να ειδοποιήσει τις επαφές του/της.

<h1>Λεπτομερής Περιγραφή</h1>
<p style="margin-bottom: 15px;">Αρχικά ο χρήστης βρίσκεται στην κύρια "σελίδα" της εφαρμογής. Από αυτή την σελίδα μπορεί να συνδεθεί στην εφαρμογή η να κάνει εγγραφή.</p>
<img src="https://drive.google.com/uc?id=1qwFPfOH_vkY2iTuo2IthWFXBpj1qdHRr" alt="" width="180" height="350" title="MainActivity">


<p style="margin-bottom: 15px;">Για να συνδεθεί θα πρέπει να συμπληρώσει το email και τον κωδικό πρόσβασης.</p>
<img src="https://drive.google.com/uc?id=1SPYfURA5HeDIr64Uw7Ts9yVpT9eLKBZc" alt="" width="180" height="350" title="Login">


<p style="margin-bottom: 15px;">Για να εγγραφεί θα πρέπει να συμπληρώσει το ονοματεπώνυμο, το email, το όνομα χρήστη και τον κωδικό πρόσβασης.</p>
<img src="https://drive.google.com/uc?id=1cMOk1p3EU2Zm3fMVVjlBM4a76vOS0HnV" alt="" width="180" height="350" title="SignUp">


<p>Στην κεντρική "σελίδα" πλοήγησης ο χρήστης μπορεί να </p>

1. Επιλέξει να προσθέσει επαφές ώστε όταν συμβεί ένα ατύχημα να ειδοποιηθούν.
2. Να αλλάξει τον τρόπο ανίχνευσης μέσω των ρυθμίσεων.
3. Να ελέγξει και να παρακολουθήσει την λειτουργία ανίχνευσης πτώσης/ατυχήματος.

<p style="margin-bottom: 15px;"> Παρακάτω στην εικόνα φαίνονται και άλλες δυνατότητες οι οποίες δεν έχουν υλοποιηθεί για την συγκεκριμένη εφαρμογή.</p>
<img src="https://drive.google.com/uc?id=1UMClt050tye8JyI2zY3eFCFLpt-H829w" alt="" width="180" height="350" title="Dashboard">


<p style="margin-bottom: 15px;">Αρχικά δεν υπάρχουν επαφές οπότε εμφανίζεται η παρακάτω "σελίδα".</p>
<img src="https://drive.google.com/uc?id=1JIr0Yl4-X77XHS9qyNlSc85qq_-gfMIJ" alt="" width="180" height="350" title="EmptyContacts">


<p style="margin-bottom: 15px;">Για να προστεθούν επαφές πρέπει να συμπληρωθεί το όνομα της επαφής και ο αριθμός κινητού τηλεφώνου.</p>
<img src="https://drive.google.com/uc?id=1i_YQtj7siBZYWxrEKc7PgNVcPrs-cDrA" alt="" width="180" height="350" title="AddContact">


<p style="margin-bottom: 15px;">Αφού προστεθούν οι επαφές, η κύρια "σελίδα" θα έχει την παρακάτω μορφή.</p>
<img src="https://drive.google.com/uc?id=1kLVVz8FF50WDsW3COrInWg9NHYKvZMKQ" alt="" width="180" height="350" title="Contacts">


<p style="margin-bottom: 15px;">Για να ενημερωθεί μία επαφή, αρκεί να ενημερωθεί το όνομα και το τηλέφωνο της επαφής.</p>
<img src="https://drive.google.com/uc?id=1h0-mJqCo1snuQ2tkZCvr7H9RVBB3PHX_" alt="" width="180" height="350" title="UpdateContact">


<p>Από τις ρυθμίσεις μπορεί να επιλεχθεί ο τρόπος ανίχνευσης πτώσης/ατυχήματος. Πιο συγκεκριμένα, υπάρχουν δύο τρόποι λειτουργίας.</p>

1. Η ανίχνευση γίνεται από την πλακέτα Arduino Nano και στέλνεται ένα BLE σήμα όταν ανιχνεύεται ένα ατύχημα η μία πτώση.
2. Η ανίχνευση γίνεται από την κινητή συσκευή χρησιμοποιώντας το ενσωματομένο επιταχυνσιόμετρο.

<p style="margin-bottom: 15px;"></p>
<img src="https://drive.google.com/uc?id=1zRWb-pfL82JfFNEFRpMoS9uawKpEg9y8" alt="" width="180" height="350" title="Settings">


<p>Από αυτή τη "σελίδα" ο χρήστης μπορεί:</p>

1. Να ξεκινήσει την ανίχνευση.
2. Να σταματήσει την ανίχνευση.
3. Να σταματήσει την αποστολή μηνύματος βοήθειας αφού ανιχνευθεί μία πτώση η ένα ατύχημα.
4. Να στείλει μήνυμα βοήθειας χειροκίνητα.

<p style="margin-bottom: 15px;"></p>
<img src="https://drive.google.com/uc?id=1QLjEyCzhb6ZyhpUyddMYDiQGazYu8aW6" alt="" width="180" height="350" title="ControlDetection">


<p style="margin-bottom: 15px;">Όταν ανιχνεύθει μία πτώση η ένα ατύχημα ο χρονομετρητής θα έχει την παρακάτω μορφή.</p>
<img src="https://drive.google.com/uc?id=1PGoCHbNPFL9qkJs4ICYB0gHMZi86ZeFz" alt="" width="180" height="350" title="Timer">


<p style="margin-bottom: 15px;">Το μήνυμα βοήθειας θα έχει την παρακάτω μορφή.</p>
<img src="https://drive.google.com/uc?id=1e5eWQpf7-wZNmZCusSmmst9QNteuI7LB" alt="" width="180" height="350" title="SMS">


<p style="margin-bottom: 15px;">Πατώντας τον σύνδεσμο στο μήνυμα βοήθειας θα μπορούν οι επαφές του χρήστη να δουν την τοποθεσία στο Google Maps.</p>
<img src="https://drive.google.com/uc?id=1TqwCLfETKgV5boM51k_xkTaN1EzXs4da" alt="" width="180" height="350" title="GoogleMaps">


<h1> Περίληψη </h1>
Με βάση όσα ειπώθηκαν, η εφαρμογή μας παρέχει έναν έξυπνο και ασφαλή τρόπο να ανιχνεύουμε πτώσεις και ατυχήματα με σχετικά μεγάλη ακρίβεια, με χαμηλή κατανάλωση ενέργειας, χρησιμοποιώντας εξοπλισμό που έχουμε ήδη στη διάθεση μας (κινητό τηλέφωνο), η αλλιώς χρησιμοποιώντας τη πλακέτα Arduino Nano. Συνδυάζοντας την εφαρμογή με μία διαδικτυακή πλατφόρμα, στην οποία θα παρέχονται πληροφορίες ατυχημάτων σε ζωντανό χρόνο, είναι δυνατόν, να ενισχυθεί η ασφάλεια της έξυπνης πόλης και να σωθούν ζωές.

<h1> Στοιχεία </h1>
Κώδικας για ανίχνευση πτώσεων και ατυχημάτων για την πλακέτα Arduino Nano 33 BLE Sense: https://github.com/GeorgeM2000/Arduino/blob/main/Bike_Fall_Detector/Bike_Fall_Detector.ino

Η παρουσίαση είναι στον παρακάτω σύνδεσμο
https://docs.google.com/presentation/d/1LVrbpPeBbXzDYNB-ZveCeSEmSfoBbXK239u4MUOUNo0/edit?usp=sharing
